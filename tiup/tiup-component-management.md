---
title: Manage TiUP Components with TiUP Commands
summary: Learn how to manage TiUP components using TiUP commands.
---

# TiUPコマンドでTiUPコンポーネントを管理する {#manage-tiup-components-with-tiup-commands}

次のTiUPコマンドを使用して、 TiUPエコシステム内のコンポーネントを管理できます。

-   list:コンポーネントリストを照会します。このTiUPコマンドを使用すると、インストールするすべてのオプション コンポーネントと、各コンポーネントのすべてのオプション バージョンを確認できます。
-   install:コンポーネントの特定のバージョンをインストールします。
-   update:コンポーネントを最新バージョンに更新します。
-   uninstall:コンポーネントをアンインストールします。
-   status: 実行中のコンポーネントのステータスを確認します。
-   clean:コンポーネントがデプロイされているインスタンスをクリーンアップします。
-   help: ヘルプ情報を出力します。このコマンドに別のTiUPコマンドを追加すると、追加されたコマンドの使用法が出力されます。

このドキュメントでは、一般的なコンポーネント管理操作と、対応するTiUPコマンドを紹介します。

## コンポーネントリストのクエリ {#query-the-component-list}

`tiup list`コマンドを使用して、コンポーネントリストを照会できます。このコマンドの使用法は次のとおりです。

-   `tiup list` : インストールできるコンポーネントをチェックします。
-   `tiup list ${component}` : 特定のコンポーネントのどのバージョンをインストールできるかを確認します。

上記のコマンドで次のフラグを使用することもできます。

-   `--installed` : どのコンポーネントまたは特定のコンポーネントのどのバージョンがローカルにインストールされているかを確認します。 - `--all` : 非表示のコンポーネントを含むすべてのコンポーネントを表示します - `--verbose` : すべての列を表示します (インストールされているバージョンとサポートされているプラットフォームを含む)

例 1: 現在インストールされているすべてのコンポーネントをビュー。

{{< copyable "" >}}

```shell
tiup list --installed
```

例 2: インストール可能なすべてのバージョンの TiKVコンポーネントのリストをサーバーから取得します。

{{< copyable "" >}}

```shell
tiup list tikv
```

## コンポーネントをインストールする {#install-components}

`tiup install`コマンドを使用して、コンポーネントリストを照会できます。このコマンドの使用法は次のとおりです。

-   `tiup install <component>` : 指定されたコンポーネントの最新の安定バージョンをインストールします。
-   `tiup install <component>:[version]` : 指定されたコンポーネントの指定されたバージョンをインストールします。

例 1: TiUPを使用して、TiDB の最新の安定バージョンをインストールします。

{{< copyable "" >}}

```shell
tiup install tidb
```

例 2: TiUPを使用して TiDB のナイトリー バージョンをインストールします。

{{< copyable "" >}}

```shell
tiup install tidb:nightly
```

例 3: TiUPを使用して TiKV v6.5.2 をインストールします。

{{< copyable "" >}}

```shell
tiup install tikv:v6.5.2
```

## コンポーネントのアップグレード {#upgrade-components}

コンポーネントの新しいバージョンが公開された後、 `tiup update`コマンドを使用してこのコンポーネントをアップグレードできます。このコマンドの使用法は、次のフラグを除いて、基本的に`tiup install`の使用法と同じです。

-   `--all` : すべてのコンポーネントをアップグレードします。
-   `--nightly` : ナイトリー バージョンにアップグレードします。
-   `--self` : TiUP自体を最新バージョンにアップグレードします。
-   `--force` : 強制的に最新バージョンにアップグレードします。

例 1: すべてのコンポーネントを最新バージョンにアップグレードします。

{{< copyable "" >}}

```shell
tiup update --all
```

例 2: すべてのコンポーネントをナイトリー バージョンにアップグレードします。

{{< copyable "" >}}

```shell
tiup update --all --nightly
```

例 3: TiUP を最新バージョンにアップグレードします。

{{< copyable "" >}}

```shell
tiup update --self
```

## コンポーネントを操作する {#operate-components}

インストールが完了したら、 `tiup <component>`コマンドを使用して、対応するコンポーネントを開始できます。

```shell
tiup [flags] <component>[:version] [args...]

Flags:
  -T, --tag string                     Specifies the tag for the component instance.
```

このコマンドを使用するには、コンポーネント名とオプションのバージョンを指定する必要があります。バージョンが指定されていない場合、このコンポーネントの最新の安定バージョン (インストール済み) が使用されます。

コンポーネントを起動する前に、 TiUP はコンポーネント用のディレクトリを作成し、このコンポーネントを操作用のディレクトリに配置します。コンポーネントはこのディレクトリにすべてのデータを生成し、このディレクトリの名前は、コンポーネントが動作するときに指定されたタグ名です。タグが指定されていない場合、タグ名はランダムに生成されます。この作業ディレクトリは、インスタンスが終了すると*自動的に削除され*ます。

同じコンポーネントを複数回起動し、以前の作業ディレクトリを再利用する場合は、コンポーネントの起動時に`--tag`使用して同じ名前を指定できます。タグを指定すると、インスタンスの終了時に作業ディレクトリが*自動的に削除されないため*、作業ディレクトリを再利用するのに便利です。

例 1: TiDB v6.5.2 を操作します。

{{< copyable "" >}}

```shell
tiup tidb:v6.5.2
```

例 2: TiKV が動作するタグを指定します。

{{< copyable "" >}}

```shell
tiup --tag=experiment tikv
```

### コンポーネントの稼働状況を照会する {#query-the-operating-status-of-a-component}

`tiup status`コマンドを使用して、コンポーネントの動作ステータスを確認できます。

{{< copyable "" >}}

```shell
tiup status
```

このコマンドを実行すると、1 行に 1 つのインスタンスのインスタンスのリストが取得されます。リストには次の列が含まれます。

-   `Name` : インスタンスのタグ名。
-   `Component` : インスタンスのコンポーネント名。
-   `PID` : オペレーティング インスタンスのプロセス ID。
-   `Status` : インスタンスのステータス。 `RUNNING` 、インスタンスが稼働していることを意味します。 `TERM` 、インスタンスが終了したことを意味します。
-   `Created Time` : インスタンスの開始時刻。
-   `Directory` : `--tag`を使用して指定できるインスタンスの作業ディレクトリ。
-   `Binary` : `--binpath`を使用して指定できるインスタンスの実行可能プログラム。
-   `Args` : オペレーティング インスタンスの引数。

### クリーンコンポーネントインスタンス {#clean-component-instance}

`tiup clean`コマンドを使用して、コンポーネントインスタンスをクリーンアップし、作業ディレクトリを削除できます。クリーニングの前にインスタンスがまだ動作している場合は、関連するプロセスが最初に強制終了されます。コマンドの使用法は次のとおりです。

{{< copyable "" >}}

```bash
tiup clean [tag] [flags]
```

次のフラグがサポートされています。

-   `--all` : すべてのインスタンス情報をクリーンアップします。

上記のコマンドで、 `tag`は消去するインスタンス タグです。 `--all`を使用すると、タグは渡されません。

例 1: タグ名が`experiment`コンポーネントインスタンスをクリーンアップします。

{{< copyable "" >}}

```shell
tiup clean experiment
```

例 2: すべてのコンポーネントインスタンスをクリーンアップします。

{{< copyable "" >}}

```shell
tiup clean --all
```

### コンポーネントのアンインストール {#uninstall-components}

TiUPを使用してインストールされたコンポーネントは、ローカル ディスク領域を占有します。古いバージョンのコンポーネントをあまり保持したくない場合は、現在インストールされているコンポーネントのバージョンを確認してから、このコンポーネントをアンインストールできます。

`tiup uninstall`コマンドを使用して、コンポーネントのすべてのバージョンまたは特定のバージョンをアンインストールできます。このコマンドは、すべてのコンポーネントのアンインストールもサポートしています。コマンドの使用法は次のとおりです。

{{< copyable "" >}}

```bash
tiup uninstall [component][:version] [flags]
```

このコマンドでは、次のフラグがサポートされています。

-   `--all` : すべてのコンポーネントまたはバージョンをアンインストールします。
-   `--self` : TiUP自体をアンインストールします。

`component`は、アンインストールするコンポーネントです。 `version`はアンインストールするバージョンです。 `tiup uninstall`コマンドでは、 `component`と`version`の両方を無視できます。これら 2 つのいずれかを無視する場合は、 `--all`フラグを追加する必要があります。

-   バージョンが無視される場合、 `--all`を追加すると、このコンポーネントのすべてのバージョンがアンインストールされます。
-   バージョンとコンポーネントの両方が無視される場合、 `--all`を追加すると、すべてのバージョンのすべてのコンポーネントがアンインストールされます。

例 1: TiDB v6.5.2 をアンインストールします。

{{< copyable "" >}}

```shell
tiup uninstall tidb:v6.5.2
```

例 2: すべてのバージョンの TiKV をアンインストールします。

{{< copyable "" >}}

```shell
tiup uninstall tikv --all
```

例 3: インストールされているすべてのコンポーネントをアンインストールします。

{{< copyable "" >}}

```shell
tiup uninstall --all
```

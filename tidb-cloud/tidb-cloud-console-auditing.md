---
title: Console Audit Logging
summary: Learn about the log auditing feature for the TiDB Cloud console.
---

# コンソール監査ログ {#console-audit-logging}

TiDB Cloud は、 TiDB Cloudコンソール操作の監査ログ機能を提供します。これにより、ユーザー アクセスの詳細 (コンソールへのユーザー ログインやクラスター作成操作など) の履歴が記録されます。

> **ノート：**
>
> 現在、**監査ログ**機能は実験的です。出力は変更される可能性があります。

## 制限事項 {#limitations}

現在、コンソール監査ログ機能には次の制限があります。

-   コンソール監査ログはデフォルトで有効になっており、ユーザーが無効にすることはできません。
-   この機能の監査フィルタリング ルールを指定することはできません。
-   監査ログにアクセスするには、PingCAP サポートを利用する必要があります。

## 監査イベントの種類 {#audit-event-types}

TiDB Cloudコンソールでのすべてのユーザー操作は、監査ログにイベントとして記録されます。監査ログには次のイベント タイプが含まれます。

| 監査イベントの種類                            | 説明                                |
| ------------------------------------ | --------------------------------- |
| 監査イベントサインイン                          | ログイン                              |
| 監査イベントサインアウト                         | サインアウト                            |
| 監査イベント更新ユーザープロファイル                   | ユーザーの姓名を更新します                     |
| 監査イベント更新MFA                          | MFA を有効または無効にする                   |
| 監査イベント作成プロジェクト                       | 新しいプロジェクトを作成する                    |
| 監査イベント更新プロジェクト                       | プロジェクト名を更新します                     |
| 監査イベント削除プロジェクト                       | プロジェクトを削除する                       |
| 監査イベントユーザーをプロジェクトに招待                 | ユーザーをプロジェクトに招待する                  |
| 監査イベント削除プロジェクトユーザー                   | プロジェクトユーザーを削除する                   |
| 監査イベント更新組織                           | 組織名とタイムゾーンを更新する                   |
| 監査イベント作成統合                           | 統合を作成する                           |
| 監査イベント削除統合                           | 統合を削除する                           |
| AuditEventListOrgUsers               | 組織内のユーザーをリストする                    |
| 監査イベントリストプロジェクトユーザー                  | プロジェクト内のユーザーをリストする                |
| AuditEventAddNewPaymentMethod        | 新しいクレジット カードを追加する                 |
| AuditEventUpdatePaymentMethod        | クレジットカード情報を更新する                   |
| AuditEventDeletePaymentMethod        | クレジットカードを削除する                     |
| 監査イベント作成AWSVpcピアリング                  | AWS VPC ピアリングを作成する                |
| AuditEventCreateGCPVpcPeering        | GCP VPC ピアリングの作成                  |
| 監査イベントリストAWSVpcピアリング                 | プロジェクト内のすべての AWS VPC ピアリングを一覧表示する |
| AuditEventListGCPVpcPeering          | プロジェクト内のすべての GCP VPC ピアリングを一覧表示する |
| 監査イベント削除AWSVpcピアリング                  | AWS VPC ピアリングを削除する                |
| AuditEventDeleteGCPVpcPeering        | GCP VPC ピアリングを削除する                |
| AuditEventGetProjectTrafficFilter    | プロジェクトのトラフィックフィルターリストを取得する        |
| AuditEventUpdateProjectTrafficFilter | プロジェクトのトラフィック フィルター リストを更新する      |
| AuditEventGetTrafficFilter           | クラスターのトラフィックフィルターリストを取得する         |
| AuditEventUpdateTrafficFilter        | クラスターのトラフィックフィルターリストを更新する         |
| 監査イベント作成プロジェクトCIDR                   | 新しいプロジェクトCIDRを作成する                |
| AuditEventGetProjectCIDR             | リージョンの CIDR をリストする                |
| AuditEventGetProjectRegionCIDR       | プロジェクト内のすべての CIDR をリストする          |
| AuditEventDeleteBackupInRecycleBin   | 削除されたクラスターのバックアップをごみ箱に削除します       |
| AuditEventChangeClusterRootPassword  | クラスターの root パスワードをリセットする          |
| 監査イベント作成インポートタスク                     | インポートタスクを作成する                     |
| 監査イベントキャンセルインポートタスク                  | インポートタスクをキャンセルする                  |
| 監査イベント終了インポートタスク                     | インポートタスクを終了する                     |
| 監査イベント作成クラスター                        | クラスターを作成する                        |
| 監査イベント削除クラスター                        | クラスターを削除する                        |
| 監査イベントスケールクラスター                      | クラスターをスケールする                      |
| 監査イベント作成バックアップ                       | バックアップを作成する                       |
| 監査イベント削除バックアップ                       | バックアップを削除する                       |
| 監査イベント復元バックアップ                       | バックアップから復元する                      |
| AuditEventUpdateAuditLogStatus       | データベース監査ログを有効または無効にする             |
| 監査イベント作成監査ログアクセスレコード                 | データベース監査ログのフィルタ条件を追加する            |
| 監査イベント削除監査ログアクセスレコード                 | データベース監査ログフィルタ条件の削除               |
| AuditEventUpdateUserRole             | ユーザーの役割を変更する                      |

## 監査ログstorageポリシー {#audit-log-storage-policy}

-   監査ログ情報は AWS ES に保存されます。
-   storage期間は 90 日間で、その後、監査ログは自動的にクリーンアップされます。

## 監査ログをビュー {#view-audit-logs}

コンソール監査ログには、 TiDB Cloudの内部担当者のみが一時的にアクセスできます。ログを表示する必要がある場合は、 [PingCAP サポート チーム](/tidb-cloud/tidb-cloud-support.md)にお問い合わせください。

## 監査ログフィールド {#audit-log-fields}

監査ログのフィールドには、基本フィールドと拡張フィールドが含まれます。

基本的なフィールドは次のとおりです。

| フィールド名    | データ・タイプ | 説明       |
| --------- | ------- | -------- |
| タイムスタンプ   | タイムスタンプ | イベントの時間  |
| 監査イベントタイプ | 弦       | イベントタイプ  |
| ユーザーID    | uint64  | ユーザーID   |
| クライアントIP  | 弦       | クライアントIP |
| 成功です      | ブール     | イベント結果   |

拡張フィールドは、さまざまなイベント タイプに基づいてイベントの説明情報を補足し、監査情報の整合性と可用性を確保します。

> **ノート：**
>
> 基本フィールドではイベントを明確に説明できないシナリオのために、次の表にこれらのイベント タイプの拡張フィールド情報を示します。テーブルにないイベントには拡張フィールドがありません。

| 監査イベントの種類                      | 拡張フィールド                  | 拡張フィールドのデータ型 | 拡張フィールドの説明                                             |
| ------------------------------ | ------------------------ | ------------ | ------------------------------------------------------ |
| 監査イベント更新MFA                    | MFA を有効にする               | ブール          | MFA を有効または無効にする                                        |
| 監査イベント作成プロジェクト                 | プロジェクト名                  | 弦            | プロジェクト名                                                |
| 監査イベント更新プロジェクト                 | 古いプロジェクト名<br/>新しいプロジェクト名 | 弦<br/>弦      | 旧プロジェクト名<br/>新しいプロジェクト名                                |
| 監査イベント削除プロジェクト                 | プロジェクト名                  | 弦            | プロジェクト名                                                |
| 監査イベントユーザーをプロジェクトに招待           | Eメール<br/>役割              | 弦<br/>弦      | Eメール<br/>役割名                                           |
| 監査イベント削除プロジェクトユーザー             | Eメール<br/>役割              | 弦<br/>弦      | Eメール<br/>役割名                                           |
| 監査イベント更新組織                     | 組織名<br/>タイムゾーン           | 弦<br/>単位     | 組織名<br/>タイムゾーン                                         |
| 監査イベント作成統合                     | 統合タイプ                    | 弦            | 一体型                                                    |
| 監査イベント削除統合                     | 統合タイプ                    | 弦            | 一体型                                                    |
| AuditEventAddNewPaymentMethod  | カード番号                    | 弦            | 支払いカード番号 (情報は機密化されていません)                               |
| AuditEventUpdatePaymentMethod  | カード番号                    | 弦            | 支払いカード番号 (情報は機密化されていません)<br/> (現在、完全なフィールド情報を取得していません) |
| AuditEventDeletePaymentMethod  |                          |              | (現在、完全なフィールド情報を取得していません)                               |
| 監査イベント作成クラスター                  | クラスタ名                    | 弦            | クラスタ名                                                  |
| 監査イベント削除クラスター                  | クラスタ名                    | 弦            | クラスタ名                                                  |
| 監査イベント作成バックアップ                 | バックアップ名                  | 弦            | バックアップ名                                                |
| 監査イベント復元バックアップ                 | クラスタ名                    | 弦            | クラスタ名                                                  |
| AuditEventUpdateAuditLogStatus | 監査ログを有効にする               | ブール          | データベース監査ログを有効または無効にする                                  |
| AuditEventUpdateUserRole       | 古い役割<br/>新しい役割           | 弦<br/>弦      | 古い役割名<br/>新しいロール名                                      |
